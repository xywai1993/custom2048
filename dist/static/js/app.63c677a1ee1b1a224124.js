webpackJsonp([1],{KYkG:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("7+uW"),a=37,n=38,o=39,s=40,c={data:function(){return{grids:null}},methods:{start:function(){var t=this;this.$nextTick(function(){var e=t.$refs.tiles.getContext("2d");t.listeningTouchDirection(),t.generateGridNumber(e),t.generateGridNumber(e),t.$on("movingtiles",t.moving)})},initChessBoard:function(){var t=this.$refs.chessBoard.getContext("2d");t.fillStyle="#bbada0",t.fillRect(0,0,300,300);for(var e=[],i=0;i<4;i++){e[i]=[];for(var r=0;r<4;r++){e[i][r]=void 0;var a=this.getBoundingClientRect(i,r);this.drawRoundingRect({ctx:t,rect:a})}}this.grids=e},drawRoundingRect:function(t){var e=t.ctx,i=t.rect,r=t.radius,a=void 0===r?6:r,n=t.fillStyle,o=void 0===n?"#ccc0b3":n,s=i.left,c=i.right,l=i.top,d=i.bottom;e.fillStyle=o,e.beginPath(),e.moveTo(s,l+a),e.quadraticCurveTo(s,l,s+a,l),e.lineTo(c-a,l),e.quadraticCurveTo(c,l,c,l+a),e.lineTo(c,d-a),e.quadraticCurveTo(c,d,c-a,d),e.lineTo(s+a,d),e.quadraticCurveTo(s,d,s,d-a),e.closePath(),e.fill()},drawGridNumber:function(t,e){var i=e.val,r=e.rect,a=this.getNumberStyle(i),n=a.backgroundColor,o=a.color,s=a.fontSize;this.drawRoundingRect({ctx:t,rect:r,fillStyle:n}),t.fillStyle=o,t.font="bold "+s+"px 微软雅黑";var c=t.measureText(i),l=r.left+(r.right-r.left)/2-c.width/2,d=r.bottom-(r.bottom-r.top)/2+s/3;t.fillText(e.val,l,d)},generateGridNumber:function(t){if(!this.nospace())for(;;){var e=Math.floor(4*Math.random()),i=Math.floor(4*Math.random());if(void 0===this.grids[e][i]){var r=2*Math.ceil(2*Math.random());this.grids[e][i]={rect:this.getBoundingClientRect(e,i),val:r},this.drawGridNumber(t,this.grids[e][i]);break}}},getBoundingClientRect:function(t,e){var i=12*(t+1)+60*t,r=12*(e+1)+60*e;return{left:i,top:r,right:i+60,bottom:r+60,height:60,width:60}},getNumberStyle:function(t){var e="black",i="white",r=46;switch(t){case 2:e="#eee4da",i="#776e50";break;case 4:e="#ede0c8",i="#776e50";break;case 8:e="#f2b179";break;case 16:e="#f59563";break;case 32:e="#f67c5f";break;case 64:e="#f65e3b";break;case 128:e="#edcf72",r="32";break;case 256:e="#edcc61",r="32";break;case 512:e="#9c0",r="32";break;case 1024:e="#33b5e5",r="20";break;case 2048:e="#09c",r="20"}return{backgroundColor:e,color:i,fontSize:r}},nospace:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(void 0===this.grids[t][e])return!1;return!0},listeningTouchDirection:function(){var t=null,e=null,i=this.$refs.tiles,r=this,c=null;i.addEventListener("touchstart",function(i){t=i.touches[0].pageX,e=i.touches[0].pageY}),i.addEventListener("touchend",function(i){var a=i.changedTouches[0].pageX,n=i.changedTouches[0].pageY,o=a-t,s=n-e;Math.abs(o)<=5&&Math.abs(s)<=5||(Math.abs(o)>Math.abs(s)?o>0?c="RIGHT":o<0&&(c="LEFT"):Math.abs(o)<Math.abs(s)&&(s>0?c="DOWN":s<0&&(c="UP")),r.$emit("movingtiles",c))}),document.addEventListener("keydown",function(t){switch(t.keyCode){case n:r.$emit("movingtiles","UP");break;case o:r.$emit("movingtiles","RIGHT");break;case s:r.$emit("movingtiles","DOWN");break;case a:r.$emit("movingtiles","LEFT")}})},moving:function(t){var e=this,i=this.$refs.tiles.getContext("2d");"RIGHT"===t?this.moveRight():"LEFT"===t?this.moveLeft():"UP"===t?this.moveUp():this.moveDown(),i.clearRect(0,0,300,300);for(var r=0;r<4;r++)for(var a=0;a<4;a++)this.grids[r][a]&&this.drawGridNumber(i,this.grids[r][a]);setTimeout(function(){e.generateGridNumber(i)},200)},moveLeft:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)for(var i=this.grids[t][e],r=t+1;r<4;){var a=this.mergeTile({currentTile:i,row:t,col:e},{i:r,j:e});if(!0===a)break;i=a,r++}},moveRight:function(){for(var t=3;t>=0;t--)for(var e=0;e<4;e++)for(var i=this.grids[t][e],r=t-1;r>=0;){var a=this.mergeTile({currentTile:i,row:t,col:e},{i:r,j:e});if(!0===a)break;i=a,r--}},moveUp:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)for(var i=this.grids[t][e],r=e+1;r<4;){var a=this.mergeTile({currentTile:i,row:t,col:e},{i:t,j:r});if(!0===a)break;i=a,r++}},moveDown:function(){for(var t=0;t<4;t++)for(var e=3;e>=0;e--)for(var i=this.grids[t][e],r=e-1;r>=0;){var a=this.mergeTile({currentTile:i,row:t,col:e},{i:t,j:r});if(!0===a)break;i=a,r--}},mergeTile:function(t,e){var i=t.currentTile,r=t.row,a=t.col,n=e.i,o=e.j,s=!1;return i?this.grids[n][o]&&(this.grids[n][o].val===i.val&&(i.val=2*i.val,this.grids[n][o]=void 0),s=!0):this.grids[n][o]&&(i=this.grids[n][o],this.grids[n][o]=void 0),i&&(this.grids[r][a]={val:i.val,rect:this.getBoundingClientRect(r,a)}),!!s||i}},mounted:function(){var t=this;this.$nextTick(function(){t.initChessBoard(),t.start()})}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Custom2048"},[e("canvas",{ref:"chessBoard",attrs:{width:"300px",height:"300px"}}),this._v(" "),e("canvas",{ref:"tiles",attrs:{width:"300px",height:"300px"}})])},staticRenderFns:[]};var d={name:"App",components:{Custom2048:i("VU/8")(c,l,!1,function(t){i("KYkG")},null,null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Custom2048")],1)},staticRenderFns:[]};var h=i("VU/8")(d,u,!1,function(t){i("dKXw")},null,null).exports;r.a.config.productionTip=!1,new r.a({el:"#app",components:{App:h},template:"<App/>"})},dKXw:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.63c677a1ee1b1a224124.js.map